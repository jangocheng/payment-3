package payment

import (
	"testing"
)

func TestUnion(t *testing.T) {
	conf := UnionKeyConfig{}
	conf.MCH_ID = "777290058130633"
	conf.MCH_PRIVATE = `
-----BEGIN RSA PRIVATE KEY-----
MIICXAIBAAKBgQCQvyFGMGkKxojiX2VUkXvu6mNJk/ayHRHXo7KOxC3oQE+QZPk2
4MnBT5eqn7pmxxkZ2Ky5NKCN914LEPJ+6+XatDEIxU7ZXDHQuGa6/Q5W35lh9aC+
M7ULZ8eWjIKM+zlnS5MrUOML8EpvoETCnC2V3YfgM45tTIXEEo3Dkx5RWwIDAQAB
AoGAP9F1OzwW5CBas+w5ggrO6KzA7+zj5O36MuhCzr1iPDc2nURXuMFtUuTjyt+3
0J7Ry1qD9PhmHZHGDfz/3cPmSFgxOmEkvc/xN0TGNfN+WZdcc/n16DKvOUXfEUE1
nx0g6UPP3MI86TaIX+cmHFuSIfRgcFOj1+9xsx8DtYkVVZkCQQDICwzlq3eDw7N+
zkBCie/UhvGOTxjPpZHyjaR3z9CWBETyzw3WM3pgBxFafYXo2ad7HUjYm7bCIM9b
DB6DufrXAkEAuTxU7XnW8khKVqaszlerWE9ohhAgn6EMR4i3PcpYFF8rdz4AWQfn
gdfhAo9UARW0gjOMe9evnBup7RLONMxxHQJBAJS5QnluJYjc8pIQHU5a5ueG/Afl
Xnjii8Nc8y3wXw9pVSmALrVVyGGkX457TBd12kJ53zLLcfCaHA+Azx74IjkCQEKd
uOlCpROy/dEV1hXLH5r9y9hS2niuAW2EdGnraCvDYi1bBeL+3boregdiplJRjP46
La6oDca1iDHzTmdckt0CQFSu+N+zVpz582JcRO1VLSuQz9WDlivtlM8CJW4Xtoq1
ceKDIbnYCkGWKyflpgI77cxgRzv9ph0vE4r9LmqUwsE=
-----END RSA PRIVATE KEY-----
`
	conf.MCH_PUBLIC = `
-----BEGIN CERTIFICATE-----
MIIDuzCCAySgAwIBAgIQHkJIM0PhX1NPZsjWiDSBzTANBgkqhkiG9w0BAQUFADAk
MQswCQYDVQQGEwJDTjEVMBMGA1UEChMMQ0ZDQSBURVNUIENBMB4XDTE1MDcwMjA3
MzEzNVoXDTE3MDcwMjA3MzEzNVowgYAxCzAJBgNVBAYTAkNOMRUwEwYDVQQKEwxD
RkNBIFRFU1QgQ0ExDTALBgNVBAsTBEJPREwxFDASBgNVBAsTC0VudGVycHJpc2Vz
MTUwMwYDVQQDFCwwNDFAWloyMDE1MDcwMkA3MDAwMDAwMDAwMDAwMDE6U0lHTkAw
MDAwMDAwMTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAkL8hRjBpCsaI4l9l
VJF77upjSZP2sh0R16OyjsQt6EBPkGT5NuDJwU+Xqp+6ZscZGdisuTSgjfdeCxDy
fuvl2rQxCMVO2Vwx0Lhmuv0OVt+ZYfWgvjO1C2fHloyCjPs5Z0uTK1DjC/BKb6BE
wpwtld2H4DOObUyFxBKNw5MeUVsCAwEAAaOCAY8wggGLMB8GA1UdIwQYMBaAFEZy
3CVynwJOVYO1gPkL2+mTs/RFMB0GA1UdDgQWBBRGIxcZAOpI+tCDQp/ZCUmEEmTK
tDALBgNVHQ8EBAMCBPAwDAYDVR0TBAUwAwEBADA7BgNVHSUENDAyBggrBgEFBQcD
AQYIKwYBBQUHAwIGCCsGAQUFBwMDBggrBgEFBQcDBAYIKwYBBQUHAwgwgfAGA1Ud
HwSB6DCB5TBPoE2gS6RJMEcxCzAJBgNVBAYTAkNOMRUwEwYDVQQKEwxDRkNBIFRF
U1QgQ0ExDDAKBgNVBAsTA0NSTDETMBEGA1UEAxMKY3JsMTI3XzM0MDCBkaCBjqCB
i4aBiGxkYXA6Ly90ZXN0bGRhcC5jZmNhLmNvbS5jbjozODkvQ049Y3JsMTI3XzM0
MCxPVT1DUkwsTz1DRkNBIFRFU1QgQ0EsQz1DTj9jZXJ0aWZpY2F0ZVJldm9jYXRp
b25MaXN0P2Jhc2U/b2JqZWN0Y2xhc3M9Y1JMRGlzdHJpYnV0aW9uUG9pbnQwDQYJ
KoZIhvcNAQEFBQADgYEAG3yOv3LD+hYsXnHC5werUcrJbh409ZyVxaagYBl/OLoX
1r51xwp4U3RkPR7fGt9payv7gUOD9p5AVhAh4/UR4+LPQdfZqVMXEGF2f/sALXlI
6KyDp9ewMzm91N7ri0oZUgFl/Xu5rDgo/32pb0lWrMuhex7DX7cPI/qALVu/anw=
-----END CERTIFICATE-----
`
	conf.UNION_PUBLIC = `
-----BEGIN CERTIFICATE-----
MIIEOjCCAyKgAwIBAgIFEAJkAUkwDQYJKoZIhvcNAQEFBQAwWDELMAkGA1UEBhMC
Q04xMDAuBgNVBAoTJ0NoaW5hIEZpbmFuY2lhbCBDZXJ0aWZpY2F0aW9uIEF1dGhv
cml0eTEXMBUGA1UEAxMOQ0ZDQSBURVNUIE9DQTEwHhcNMTUxMjA0MDMyNTIxWhcN
MTcxMjA0MDMyNTIxWjB5MQswCQYDVQQGEwJjbjEXMBUGA1UEChMOQ0ZDQSBURVNU
IE9DQTExEjAQBgNVBAsTCUNGQ0EgVEVTVDEUMBIGA1UECxMLRW50ZXJwcmlzZXMx
JzAlBgNVBAMUHjA0MUBaMTJAMDAwNDAwMDA6U0lHTkAwMDAwMDA2MjCCASIwDQYJ
KoZIhvcNAQEBBQADggEPADCCAQoCggEBAMUDYYCLYvv3c911zhRDrSWCedAYDJQe
fJUjZKI2avFtB2/bbSmKQd0NVvh+zXtehCYLxKOltO6DDTRHwH9xfhRY3CBMmcOv
d2xQQvMJcV9XwoqtCKqhzguoDxJfYeGuit7DpuRsDGI0+yKgc1RY28v1VtuXG845
fTP7PRtJrareQYlQXghMgHFAZ/vRdqlLpVoNma5C56cJk5bfr2ngDlXbUqPXLi1j
iXAFb/y4b8eGEIl1LmKp3aPMDPK7eshc7fLONEp1oQ5Jd1nE/GZj+lC345aNWmLs
l/09uAvo4Lu+pQsmGyfLbUGR51KbmHajF4Mrr6uSqiU21Ctr1uQGkccCAwEAAaOB
6TCB5jAfBgNVHSMEGDAWgBTPcJ1h6518Lrj3ywJA9wmd/jN0gDBIBgNVHSAEQTA/
MD0GCGCBHIbvKgEBMDEwLwYIKwYBBQUHAgEWI2h0dHA6Ly93d3cuY2ZjYS5jb20u
Y24vdXMvdXMtMTQuaHRtMDgGA1UdHwQxMC8wLaAroCmGJ2h0dHA6Ly91Y3JsLmNm
Y2EuY29tLmNuL1JTQS9jcmw0NDkxLmNybDALBgNVHQ8EBAMCA+gwHQYDVR0OBBYE
FAFmIOdt15XLqqz13uPbGQwtj4PAMBMGA1UdJQQMMAoGCCsGAQUFBwMCMA0GCSqG
SIb3DQEBBQUAA4IBAQB8YuMQWDH/Ze+e+2pr/914cBt94FQpYqZOmrBIQ8kq7vVm
TTy94q9UL0pMMHDuFJV6Wxng4Me/cfVvWmjgLg/t7bdz0n6UNj4StJP17pkg68WG
zMlcjuI7/baxtDrD+O8dKpHoHezqhx7dfh1QWq8jnqd3DFzfkhEpuIt6QEaUqoWn
t5FxSUiykTfjnaNEEGcn3/n2LpwrQ+upes12/B778MQETOsVv4WX8oE1Qsv1XLRW
i0DQetTU2RXTrynv+l4kMy0h9b/Hdlbuh2s0QZqlUMXx2biy0GvpF2pR8f+OaLuT
AtaKdU4T2+jO44+vWNNN2VoAaw0xY6IZ3/A1GL0x
-----END CERTIFICATE-----
`
	InitUnionKey(conf)

	req := UnionConsumeRequest{}
	req.OrderId = "testorderid"
	req.BackUrl = "http://www.cegou.co/payment/union"
	req.TxnAmt = "1"
	req.Post()
}
